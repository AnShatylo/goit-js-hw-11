{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-function.js","../src/main.js"],"sourcesContent":["export function searchImage(query) {\n  const pixabayAPI = {\n    url: 'https://pixabay.com/api/',\n    key: '44811580-9eab9f49684dd01a2a36a0ef4',\n    imageType: 'photo',\n    orient: 'horizontal',\n    safeSearch: true,\n  };\n  const baseUrl = `${pixabayAPI.url}?key=${pixabayAPI.key}&q=${query}&image_type=${pixabayAPI.imageType}&orientation=${pixabayAPI.orient}&safesearch=${pixabayAPI.safeSearch}`;\n\n  return fetch(baseUrl).then(res => {\n    if (!res.ok) {\n      throw new Error(res.status);\n    }\n    return res.json();\n  });\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport function createGallery(img) {\n  const gallery = document.querySelector('.gallery');\n  const markup = img\n    .map(\n      image =>\n        `<li class=\"img-wrap\">\n        <a href=\"${image.largeImageURL}\">\n          <img\n            src=\"${image.webformatURL}\"\n            alt=\"${image.tags}\"\n          />\n        </a>\n        <div class=\"gallery-info-wrapper\">\n          <div class=\"info-likes\">\n            <p class=\"title\">Likes</p>\n            <p class=\"subtitle\">${image.likes}</p>\n          </div>\n          <div class=\"info-views\">\n            <p class=\"title\">Views</p>\n            <p class=\"subtitle\">${image.views}</p>\n          </div>\n          <div class=\"info-comments\">\n            <p class=\"title\">Comments</p>\n            <p class=\"subtitle\">${image.comments}</p>\n          </div>\n          <div class=\"info-downloads\">\n            <p class=\"title\">Downloads</p>\n            <p class=\"subtitle\">${image.downloads}</p>\n          </div>\n        </div>\n      </li>\n          `\n    )\n    .join('');\n\n  gallery.insertAdjacentHTML('afterbegin', markup);\n  new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionPosition: 'bottom',\n    captionDelay: 250,\n    overlayOpacity: 0.8,\n  }).refresh();\n}\n\nexport function clearGallery() {\n  const gallery = document.querySelector('.gallery');\n  gallery.innerHTML = '';\n}\n\nexport function showLoader() {\n  const loader = document.querySelector('.loader-wrapp');\n  loader.classList.remove('hide');\n}\n\nexport function hideLoader() {\n  const loader = document.querySelector('.loader-wrapp');\n  loader.classList.add('hide');\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { searchImage } from './js/pixabay-api';\nimport {\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n} from './js/render-function';\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  const searchForm = document.querySelector('.form');\n\n  searchForm.addEventListener('submit', searchFormEvt);\n\n  function searchFormEvt(e) {\n    clearGallery();\n\n    e.preventDefault();\n    const form = e.target;\n    const query = form.elements.query.value.trim();\n    if (query === '') {\n      iziToast.error({\n        backgroundColor: '#EF4040',\n        message: 'Please fill the form',\n        titleColor: '#fff',\n        messageColor: '#fff',\n        progressBarColor: '#B51B1B',\n      });\n      return;\n    }\n    showLoader();\n\n    searchImage(query)\n      .then(data => {\n        if (data.hits.length === 0) {\n          iziToast.error({\n            backgroundColor: '#EF4040',\n            message:\n              'Sorry, there are no images matching your search query. Please try again!',\n            titleColor: '#fff',\n            messageColor: '#fff',\n            progressBarColor: '#B51B1B',\n          });\n          return;\n        }\n\n        createGallery(data.hits);\n      })\n      .catch(error => {\n        console.log(error);\n        iziToast.error({\n          backgroundColor: '#EF4040',\n          message: 'Sorry, something goes wrong. Please, try again later!',\n          titleColor: '#fff',\n          messageColor: '#fff',\n          progressBarColor: '#B51B1B',\n        });\n      })\n      .finally(() => {\n        hideLoader();\n      });\n\n    form.reset();\n  }\n});\n"],"names":["searchImage","query","pixabayAPI","baseUrl","res","createGallery","img","gallery","markup","image","SimpleLightbox","clearGallery","showLoader","hideLoader","searchFormEvt","e","form","iziToast","data","error"],"mappings":"wvBAAO,SAASA,EAAYC,EAAO,CACjC,MAAMC,EAAa,CACjB,IAAK,2BACL,IAAK,qCACL,UAAW,QACX,OAAQ,aACR,WAAY,EAChB,EACQC,EAAU,GAAGD,EAAW,GAAG,QAAQA,EAAW,GAAG,MAAMD,CAAK,eAAeC,EAAW,SAAS,gBAAgBA,EAAW,MAAM,eAAeA,EAAW,UAAU,GAE1K,OAAO,MAAMC,CAAO,EAAE,KAAKC,GAAO,CAChC,GAAI,CAACA,EAAI,GACP,MAAM,IAAI,MAAMA,EAAI,MAAM,EAE5B,OAAOA,EAAI,MACf,CAAG,CACH,CCbO,SAASC,EAAcC,EAAK,CACjC,MAAMC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAASF,EACZ,IACCG,GACE;AAAA,mBACWA,EAAM,aAAa;AAAA;AAAA,mBAEnBA,EAAM,YAAY;AAAA,mBAClBA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCAMKA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,kCAIXA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,kCAIXA,EAAM,QAAQ;AAAA;AAAA;AAAA;AAAA,kCAIdA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA,WAK5C,EACA,KAAK,EAAE,EAEVF,EAAQ,mBAAmB,aAAcC,CAAM,EAC/C,IAAIE,EAAe,aAAc,CAC/B,aAAc,MACd,gBAAiB,SACjB,aAAc,IACd,eAAgB,EACpB,CAAG,EAAE,QAAO,CACZ,CAEO,SAASC,GAAe,CAC7B,MAAMJ,EAAU,SAAS,cAAc,UAAU,EACjDA,EAAQ,UAAY,EACtB,CAEO,SAASK,GAAa,CACZ,SAAS,cAAc,eAAe,EAC9C,UAAU,OAAO,MAAM,CAChC,CAEO,SAASC,GAAa,CACZ,SAAS,cAAc,eAAe,EAC9C,UAAU,IAAI,MAAM,CAC7B,CClDA,SAAS,iBAAiB,mBAAoB,UAAY,CACrC,SAAS,cAAc,OAAO,EAEtC,iBAAiB,SAAUC,CAAa,EAEnD,SAASA,EAAcC,EAAG,CACxBJ,IAEAI,EAAE,eAAc,EAChB,MAAMC,EAAOD,EAAE,OACTd,EAAQe,EAAK,SAAS,MAAM,MAAM,OACxC,GAAIf,IAAU,GAAI,CAChBgB,EAAS,MAAM,CACb,gBAAiB,UACjB,QAAS,uBACT,WAAY,OACZ,aAAc,OACd,iBAAkB,SAC1B,CAAO,EACD,MACD,CACDL,IAEAZ,EAAYC,CAAK,EACd,KAAKiB,GAAQ,CACZ,GAAIA,EAAK,KAAK,SAAW,EAAG,CAC1BD,EAAS,MAAM,CACb,gBAAiB,UACjB,QACE,2EACF,WAAY,OACZ,aAAc,OACd,iBAAkB,SAC9B,CAAW,EACD,MACD,CAEDZ,EAAca,EAAK,IAAI,CAC/B,CAAO,EACA,MAAMC,GAAS,CACd,QAAQ,IAAIA,CAAK,EACjBF,EAAS,MAAM,CACb,gBAAiB,UACjB,QAAS,wDACT,WAAY,OACZ,aAAc,OACd,iBAAkB,SAC5B,CAAS,CACT,CAAO,EACA,QAAQ,IAAM,CACbJ,GACR,CAAO,EAEHG,EAAK,MAAK,CACX,CACH,CAAC"}